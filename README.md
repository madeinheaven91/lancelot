# Lancelot - агрегатор фриланс заказов

Lancelot - API, который собирает информацию о заказах с различных российских фриланс бирж в одном месте.

На данный момент реализован сбор данных с Хабр фриланса, Кворка и Фл.ру.

## Установка

Для того, чтобы собрать информацию с некоторых сайтов, в проекте используется протокол WebDriver. Его необходимо установить на сервер и запустить отдельно от проекта.\
Если у вас стоит Firefox, рекомендуется использовать geckodriver от Mozilla. После установки его надо запустить на порте, указанном в переменной окружения (по умолчанию 4444).

`Arch Linux`

```bash
sudo pacman -S geckodriver
geckodriver --port 4444
```

В другой вкладке терминала:

```bash
cd {DOWNLOAD_PATH}/lancelot
cargo run
```

Далее переходите на http://localhost:3000/{адрес} и пользуйтесь!

## Использование

Переменные окружения:

- PORT - сетевой порт (3000 по умолчанию)
- WEBDRIVER_PORT - порт вебдрайвера (указанный в `geckodriver --port`, по умолчанию 4444)

Страницы API ( http://localhost:3000 ):

- /parse/habr - Хабр Фриланс
- /parse/kwork - Kwork
- /parse/fl - FL

Всю информацию также можно посмотреть на странице http://localhost:3000/info

## Фильтрация ответов

Данные, полученные из api можно фильтровать с помощью query параметров.

Ключи и значения:

- price_kind = {negotiated, per_hour, per_project}   // <i>По виду оплаты</i>
- price_value{[gte], [lte]} = u32   // <i>По сумме оплаты</i>
- responses{[eq], [gte], [lte]} = u32   // <i>По количеству ответов</i>
- views{[eq], [gte], [lte]} = u32   // <i>По количеству просмотров</i>
- pinned = {true, false}   // <i>По закрепам</i> 
- urgent = {true, false}   // <i>По срочности</i> 
- vacancy = {true, false}   // <i>По вакансиям</i> 

### TODO:

- [x] Парсинг Хабра
- [x] Сериализация полученных заказов в json
- [x] Отправка заказов через http
- [ ] Фильтрация заказов (в процессе)
- [ ] Сортировка заказов
- [x] Парсинг других бирж
- [ ] Фронтенд
- [x] Телеграм бот (в процессе)
